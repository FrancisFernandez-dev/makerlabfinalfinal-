{% extends 'biblioteca/base.html' %}
{% load static %}

{% block content %}

<!-- HERO -->
<section class="hero-section">
    <div class="container">
        <div class="row align-items-center">

            <!-- TEXTO -->
            <div class="col-md-6">
                <h1 class="hero-title">
                    Explora,<br>
                    imprime y<br>
                    aprende con<br>
                    modelos 3D
                </h1>

                <p class="hero-subtitle">
                    Recursos educativos para colegios, hogares y makers
                </p>

                <!-- Buscador principal -->
                <form method="get" action="{% url 'lista_modelos' %}" class="hero-search d-flex">
                    <input
                        type="text"
                        name="q"
                        class="form-control"
                        placeholder="Buscar modelos educativos..."
                    >
                </form>

                <a href="{% url 'contactanos' %}" class="btn btn-hero mt-3">
                    Cont√°ctanos
                </a>
            </div>

            <!-- IMAGEN -->
            <div class="col-md-6 text-center">
                <img
                    src="{% static 'img/hero-3d.jpg' %}"
                    alt="Modelos 3D educativos"
                    class="hero-image"
                >
            </div>

        </div>
    </div>
</section>

<!-- SECCI√ìN MODELOS -->
<section class="models-section">
    <div class="container">

        <h2 class="text-center mb-2">Biblioteca de Modelos 3D</h2>
        <p class="text-center text-muted mb-5">
            Explora los modelos educativos disponibles para escuelas y hogares.
        </p>

        <!-- üîµ BOTONES STEAM -->
        <!-- SECCI√ìN STEAM -->
        <section class="steam-categories">
            <div class="container">
                <h3 class="text-center mb-4">
                    Categor√≠as educativas (STEAM)
                </h3>

                <div class="row justify-content-center g-4">

                    <div class="col-6 col-md-2">
                        <a href="?steam=S" class="steam-card">
                            <div class="steam-icon">S</div>
                            <div class="steam-label">Ciencia</div>
                        </a>
                    </div>

                    <div class="col-6 col-md-2">
                        <a href="?steam=T" class="steam-card">
                            <div class="steam-icon">T</div>
                            <div class="steam-label">Tecnolog√≠a</div>
                        </a>
                    </div>

                    <div class="col-6 col-md-2">
                        <a href="?steam=E" class="steam-card">
                            <div class="steam-icon">E</div>
                            <div class="steam-label">Ingenier√≠a</div>
                        </a>
                    </div>

                    <div class="col-6 col-md-2">
                        <a href="?steam=A" class="steam-card">
                            <div class="steam-icon">A</div>
                            <div class="steam-label">Artes</div>
                        </a>
                    </div>

                    <div class="col-6 col-md-2">
                        <a href="?steam=M" class="steam-card">
                            <div class="steam-icon">M</div>
                            <div class="steam-label">Matem√°ticas</div>
                        </a>
                    </div>

                </div>
            </div>
        </section>

        


        <!-- Bot√≥n agregar (solo logueado) -->
        {% if user.is_authenticated %}
            <div class="d-flex justify-content-end mb-4">
                <a href="{% url 'agregar_modelo' %}" class="btn btn-success">
                    + Agregar modelo
                </a>
            </div>
        {% endif %}

        <!-- Cards -->
        <div class="row">

            {% for modelo in modelos %}
                <div class="col-md-4 mb-4">

                    <!-- CARD CLICKEABLE -->
                    <a href="{{ modelo.url_archivo }}"
                       target="_blank"
                       class="card-link text-decoration-none">

                        <div class="card model-card h-100">

                            {% if modelo.imagen %}
                                <img
                                    src="{{ modelo.imagen.url }}"
                                    class="card-img-top"
                                    alt="{{ modelo.nombre }}"
                                >
                            {% else %}
                                <img
                                    src="{% static 'img/placeholder.png' %}"
                                    class="card-img-top"
                                    alt="Sin imagen"
                                >
                            {% endif %}

                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title">{{ modelo.nombre }}</h5>

                                <p class="card-text text-muted">
                                    {{ modelo.descripcion|truncatewords:20 }}
                                </p>

                                <p class="model-meta mt-auto">
                                    {{ modelo.categoria.nombre }} ¬∑ {{ modelo.nivel }}
                                </p>
                            </div>

                        </div>
                    </a>

                </div>
            {% empty %}
                <div class="col-12">
                    <p class="text-center">No se encontraron modelos.</p>
                </div>
            {% endfor %}

        </div>

    </div>
</section>

{% endblock %}
